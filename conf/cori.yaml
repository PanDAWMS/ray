payload:
  plugin: pilot2http:Pilot2HttpPayload
  bindir:
  pandaqueue: NERSC_Cori_p2_ES_Test
  logfilename: log.pilotwrapper
  extrasetup: export ALRB_CONT_SWTYPE=shifter; export LD_LIBRARY_PATH=/global/common/software/atlas/yampl/yampl-v1.0-py3.7/install/lib:$LD_LIBRARY_PATH; export PYTHONPATH=/global/common/software/atlas/yampl/yampl-v1.0-py3.7/install/python-yampl:$PYTHONPATH;
  extrapostpayload:
  hpcresource: cori
  containerengine:
  containerextraargs:
  condabindir:
  virtualenv:
  pilotversion: 3
  py3pilot: true
  pilotkillfile: pilot_kill_payload
  pilotkilltime: 900
  timemonitorfile: jobtimeout.txt

harvester:
  cacher: $SCRATCH/harvester
  endpoint: $SCRATCH/harvester/var/lib/workdir/panda
  communicator: harvesterFileMessenger:HarvesterFileCommunicator
  harvesterconf: /global/common/software/atlas/harvester/etc/panda/panda_harvester.cfg

ray:
  headip:
  redisport:
  redispassword:
  driver: esdriver:ESDriver
  workdir: $SCRATCH/raythena/workdir
  monitortime: 300
  timeoutinterval: 600
  tarinterval: 60
  tarmaxfilesize: 5000000000
  tarmaxprocesses: 64
  tarcheckinterval: 60

resources:
  corepernode: 128
  workerpernode: 1

logging:
  level: debug
  driverlogfile:
  workerlogfile:
  copyraylogs: false
